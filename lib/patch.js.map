{"version":3,"sources":["../src/patch.js"],"names":["add_id","addMethod","addHeaders","getCSRF","createPromise","xhrRequest","url","rails","csrf","data_set","headers","promise","xhr","url_id","addCSRF","token","addRails","resolve","reject","data","id","api","open","set","get","param","send"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,UAAP,MAAuB,eAAvB;;AAEA,eAAe,UAASC,GAAT,EAA2B;AAAA,MAAbC,KAAa,uEAAL,IAAK;;AACxC,MAAIC,aAAJ;AAAA,MAAUC,iBAAV;AAAA,MAAoBC,gBAApB;AAAA,MAA6BC,gBAA7B;AAAA,MAAsCC,YAAtC;AAAA,MAA2CC,eAA3C;AACAL,SAAOL,SAAP;AACAO,YAAUR,YAAV;;AAEAQ,UAAQI,OAAR,CAAgBN,KAAKO,KAArB;AACAF,WAASb,OAAOM,GAAP,CAAT;AACAG,aAAWR,UAAUO,IAAV,EAAgB,OAAhB,CAAX;;AAEA,MAAID,KAAJ,EAAU;AACRG,YAAQM,QAAR;AACD;;AAEDL,YAAUP,eAAV;AACAQ,QAAMP,WAAWM,QAAQM,OAAnB,EAA4BN,QAAQO,MAApC,CAAN;;AAEA,SAAO,UAASC,IAAT,EAAeC,EAAf,EAAkB;AACvB,QAAIC,MAAOD,EAAD,GAAOP,OAAOO,EAAP,CAAP,GAAoBd,GAA9B;AACAM,QAAIU,IAAJ,CAAS,KAAT,EAAgBD,GAAhB;AACAX,YAAQa,GAAR,CAAYX,IAAIY,GAAJ,EAAZ;AACAL,SAAKX,KAAKiB,KAAV,IAAmBjB,KAAKO,KAAxB;AACAH,QAAIc,IAAJ,CAASjB,SAASU,IAAT,CAAT;AACA,WAAOR,QAAQA,OAAf;AACD,GAPD;AAQD","file":"patch.js","sourcesContent":["import add_id from './add_id';\nimport addMethod from './add_method';\nimport addHeaders from './manage_headers';\nimport getCSRF from './get_CSRF';\nimport createPromise from './create_promise';\nimport xhrRequest from './set_request';\n\nexport default function(url, rails = true){\n  let csrf, data_set, headers, promise, xhr, url_id;\n  csrf = getCSRF();\n  headers = addHeaders();\n\n  headers.addCSRF(csrf.token);\n  url_id = add_id(url);\n  data_set = addMethod(csrf, 'patch');\n\n  if (rails){\n    headers.addRails();\n  }\n\n  promise = createPromise();\n  xhr = xhrRequest(promise.resolve, promise.reject);\n\n  return function(data, id){\n    let api = (id) ? url_id(id) : url;\n    xhr.open('PUT', api);\n    headers.set(xhr.get());\n    data[csrf.param] = csrf.token;\n    xhr.send(data_set(data));\n    return promise.promise;\n  };\n};\n"]}