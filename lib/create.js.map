{"version":3,"sources":["../src/create.js"],"names":["xhrRequest","require","addHeaders","getCSRF","createPromise","module","exports","url","rails","promise","xhr","headers","csrf","addCSRF","token","addRails","resolve","reject","open","set","get","data","param","send"],"mappings":";;AAAA,IAAIA,aAAaC,QAAQ,eAAR,CAAjB;AAAA,IACMC,aAAaD,QAAQ,kBAAR,CADnB;AAAA,IAEME,UAAUF,QAAQ,YAAR,CAFhB;AAAA,IAGMG,gBAAgBH,QAAQ,kBAAR,CAHtB;;AAKAI,OAAOC,OAAP,GAAiB,UAASC,GAAT,EAA2B;AAAA,MAAbC,KAAa,uEAAL,IAAK;;AAC1C,MAAIC,gBAAJ;AAAA,MAAaC,YAAb;AAAA,MAAkBC,gBAAlB;AAAA,MAA2BC,aAA3B;AACAA,SAAOT,SAAP;AACAQ,YAAUT,YAAV;AACAS,UAAQE,OAAR,CAAgBD,KAAKE,KAArB;;AAEA,MAAIN,KAAJ,EAAU;AACRG,YAAQI,QAAR;AACD;;AAEDN,YAAUL,eAAV;;AAEAM,QAAMV,WAAWS,QAAQO,OAAnB,EAA4BP,QAAQQ,MAApC,CAAN;AACAP,MAAIQ,IAAJ,CAAS,MAAT,EAAiBX,GAAjB;AACAI,UAAQQ,GAAR,CAAYT,IAAIU,GAAJ,EAAZ;;AAEA,SAAO,UAASC,IAAT,EAAc;AACnBA,SAAKT,KAAKU,KAAV,IAAmBV,KAAKE,KAAxB;AACAJ,QAAIa,IAAJ,CAASF,IAAT;AACA,WAAOZ,QAAQA,OAAf;AACD,GAJD;AAKD,CArBD","file":"create.js","sourcesContent":["let xhrRequest = require('./set_request')\n    , addHeaders = require('./manage_headers')\n    , getCSRF = require('./get_CSRF')\n    , createPromise = require('./create_promise');\n\nmodule.exports = function(url, rails = true){\n  let promise, xhr, headers, csrf;\n  csrf = getCSRF();\n  headers = addHeaders();\n  headers.addCSRF(csrf.token);\n\n  if (rails){\n    headers.addRails();\n  }\n\n  promise = createPromise();\n\n  xhr = xhrRequest(promise.resolve, promise.reject);\n  xhr.open('POST', url);\n  headers.set(xhr.get());\n\n  return function(data){\n    data[csrf.param] = csrf.token;\n    xhr.send(data);\n    return promise.promise;\n  };\n};\n"]}