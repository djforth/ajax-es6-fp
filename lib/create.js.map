{"version":3,"sources":["../src/create.js"],"names":["xhrRequest","addHeaders","getCSRF","createPromise","url","rails","promise","xhr","headers","csrf","addCSRF","token","addRails","resolve","reject","open","set","get","data","param","send"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,eAAvB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;;AAEA,eAAe,UAASC,GAAT,EAA2B;AAAA,MAAbC,KAAa,uEAAL,IAAK;;AACxC,MAAIC,gBAAJ;AAAA,MAAaC,YAAb;AAAA,MAAkBC,gBAAlB;AAAA,MAA2BC,aAA3B;AACAA,SAAOP,SAAP;AACAM,YAAUP,YAAV;AACAO,UAAQE,OAAR,CAAgBD,KAAKE,KAArB;;AAEA,MAAIN,KAAJ,EAAU;AACRG,YAAQI,QAAR;AACD;;AAEDN,YAAUH,eAAV;;AAEAI,QAAMP,WAAWM,QAAQO,OAAnB,EAA4BP,QAAQQ,MAApC,CAAN;AACAP,MAAIQ,IAAJ,CAAS,MAAT,EAAiBX,GAAjB;AACAI,UAAQQ,GAAR,CAAYT,IAAIU,GAAJ,EAAZ;;AAEA,SAAO,UAASC,IAAT,EAAc;AACnBA,SAAKT,KAAKU,KAAV,IAAmBV,KAAKE,KAAxB;AACAJ,QAAIa,IAAJ,CAASF,IAAT;AACA,WAAOZ,QAAQA,OAAf;AACD,GAJD;AAKD","file":"create.js","sourcesContent":["import xhrRequest from './set_request';\nimport addHeaders from './manage_headers';\nimport getCSRF from './get_CSRF';\nimport createPromise from './create_promise';\n\nexport default function(url, rails = true){\n  let promise, xhr, headers, csrf;\n  csrf = getCSRF();\n  headers = addHeaders();\n  headers.addCSRF(csrf.token);\n\n  if (rails){\n    headers.addRails();\n  }\n\n  promise = createPromise();\n\n  xhr = xhrRequest(promise.resolve, promise.reject);\n  xhr.open('POST', url);\n  headers.set(xhr.get());\n\n  return function(data){\n    data[csrf.param] = csrf.token;\n    xhr.send(data);\n    return promise.promise;\n  };\n};\n"]}