{"version":3,"sources":["../src/destroy.js"],"names":["add_id","addMethod","addHeaders","getCSRF","createPromise","xhrRequest","url","rails","csrf","data_set","headers","promise","xhr","url_id","addCSRF","token","addRails","resolve","reject","id","data","api","open","set","get","send"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,UAAP,MAAuB,eAAvB;;AAEA,eAAe,UAASC,GAAT,EAA2B;AAAA,MAAbC,KAAa,uEAAL,IAAK;;AACxC,MAAIC,aAAJ;AAAA,MAAUC,iBAAV;AAAA,MAAoBC,gBAApB;AAAA,MAA6BC,gBAA7B;AAAA,MAAsCC,YAAtC;AAAA,MAA2CC,eAA3C;AACAL,SAAOL,SAAP;AACAO,YAAUR,YAAV;;AAEAQ,UAAQI,OAAR,CAAgBN,KAAKO,KAArB;AACAF,WAASb,OAAOM,GAAP,CAAT;AACAG,aAAWR,UAAUO,IAAV,EAAgB,QAAhB,CAAX;AACA,MAAID,KAAJ,EAAU;AACRG,YAAQM,QAAR;AACD;;AAEDL,YAAUP,eAAV;;AAEAQ,QAAMP,WAAWM,QAAQM,OAAnB,EAA4BN,QAAQO,MAApC,CAAN;;AAEA,SAAO,UAASC,EAAT,EAAaC,IAAb,EAAkB;AACvB,QAAIC,MAAOF,EAAD,GAAON,OAAOM,EAAP,CAAP,GAAoBb,GAA9B;AACAM,QAAIU,IAAJ,CAAS,QAAT,EAAmBD,GAAnB;AACA;AACAX,YAAQa,GAAR,CAAYX,IAAIY,GAAJ,EAAZ;AACAZ,QAAIa,IAAJ,CAAShB,SAASW,IAAT,CAAT;AACA,WAAOT,QAAQA,OAAf;AACD,GAPD;AAQD","file":"destroy.js","sourcesContent":["import add_id from './add_id';\nimport addMethod from './add_method';\nimport addHeaders from './manage_headers';\nimport getCSRF from './get_CSRF';\nimport createPromise from './create_promise';\nimport xhrRequest from './set_request';\n\nexport default function(url, rails = true){\n  let csrf, data_set, headers, promise, xhr, url_id;\n  csrf = getCSRF();\n  headers = addHeaders();\n\n  headers.addCSRF(csrf.token);\n  url_id = add_id(url);\n  data_set = addMethod(csrf, 'delete');\n  if (rails){\n    headers.addRails();\n  }\n\n  promise = createPromise();\n\n  xhr = xhrRequest(promise.resolve, promise.reject);\n\n  return function(id, data){\n    let api = (id) ? url_id(id) : url;\n    xhr.open('DELETE', api);\n    // data[csrf.param] = csrf.token;\n    headers.set(xhr.get());\n    xhr.send(data_set(data));\n    return promise.promise;\n  };\n};\n"]}