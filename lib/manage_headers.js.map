{"version":3,"sources":["../src/manage_headers.js"],"names":["_","require","reject","addHeaders","headers","token","clone","isArray","concat","push","module","exports","obj","add","addDelete","header","value","addCSRF","addRails","all","clear","remove","h","set","xhr","forEach","setRequestHeader"],"mappings":";;AAAA,IAAMA,IAAKC,QAAQ,aAAR,CAAX;AACAD,EAAEE,MAAF,GAAWD,QAAQ,eAAR,CAAX;;AAEA,SAASE,UAAT,CAAoBC,OAApB,EAA6BC,KAA7B,EAAmC;AACjCD,YAAUJ,EAAEM,KAAF,CAAQF,OAAR,CAAV;AACA,MAAIJ,EAAEO,OAAF,CAAUF,KAAV,CAAJ,EAAqB;AACnBD,cAAUA,QAAQI,MAAR,CAAeH,KAAf,CAAV;AACD,GAFD,MAEO;AACLD,YAAQK,IAAR,CAAaJ,KAAb;AACD;AACD,SAAOD,OAAP;AACD;;AAEDM,OAAOC,OAAP,GAAiB,YAAU;AACzB,MAAIP,UAAU,EAAd;;AAEA,MAAMQ,MAAM;AACVC,SAAK,aAASR,KAAT,EAAe;AAClBD,gBAAUD,WAAWC,OAAX,EAAoBC,KAApB,CAAV;AACA,aAAOO,GAAP;AACD,KAJS;AAKRE,eAAW,qBAAU;AACrBV,gBAAUD,WAAWC,OAAX,EACN,EAACW,QAAQ,wBAAT,EAAmCC,OAAO,QAA1C,EADM,CAAV;AAGA,aAAOJ,GAAP;AACD,KAVS;AAWRK,aAAS,iBAASZ,KAAT,EAAe;AACxBD,gBAAUD,WAAWC,OAAX,EAAoB,EAACW,QAAQ,cAAT,EAAyBC,OAAOX,KAAhC,EAApB,CAAV;;AAEA,aAAOO,GAAP;AACD,KAfS;AAgBRM,cAAU,oBAAU;AACpB;AACAd,gBAAUD,WAAWC,OAAX,EAAoB,CAC5B,EAACW,QAAQ,cAAT,EAAyBC,OAAO,kBAAhC,EAD4B,EAE1B,EAACD,QAAQ,QAAT,EAAmBC,OAAO,sGAA1B,EAF0B,CAApB,CAAV;AAGA;AACA,aAAOJ,GAAP;AACD,KAvBS;AAwBRO,SAAK;AAAA,aAAIf,OAAJ;AAAA,KAxBG;AAyBRgB,WAAO,iBAAU;AACjBhB,gBAAU,EAAV;AACD,KA3BS;AA4BRiB,YAAQ,gBAASN,MAAT,EAAgB;AACxBX,gBAAUJ,EAAEE,MAAF,CAASE,OAAT,EAAkB,UAACkB,CAAD,EAAK;AAC/B,eAAOA,EAAEP,MAAF,KAAaA,MAApB;AACD,OAFS,CAAV;AAGD,KAhCS;AAiCRQ,SAAK,aAASC,GAAT,EAAa;AAClBxB,QAAEyB,OAAF,CAAUrB,OAAV,EAAmB,UAASkB,CAAT,EAAW;AAC5BE,YAAIE,gBAAJ,CAAqBJ,EAAEP,MAAvB,EAA+BO,EAAEN,KAAjC;AACD,OAFD;AAGD;AArCS,GAAZ;;AAwCA,SAAOJ,GAAP;AACD,CA5CD","file":"manage_headers.js","sourcesContent":["const _  = require('lodash/core');\n_.reject = require('lodash/reject');\n\nfunction addHeaders(headers, token){\n  headers = _.clone(headers);\n  if (_.isArray(token)){\n    headers = headers.concat(token);\n  } else {\n    headers.push(token);\n  }\n  return headers;\n}\n\nmodule.exports = function(){\n  let headers = [];\n\n  const obj = {\n    add: function(token){\n      headers = addHeaders(headers, token);\n      return obj;\n    }\n    , addDelete: function(){\n      headers = addHeaders(headers\n        , {header: 'X-Http-Method-Override', value: 'delete'}\n      );\n      return obj;\n    }\n    , addCSRF: function(token){\n      headers = addHeaders(headers, {header: 'X-CSRF-Token', value: token});\n\n      return obj;\n    }\n    , addRails: function(){\n      /* eslint-disable max-len */\n      headers = addHeaders(headers, [\n        {header: 'Content-type', value: 'application/json'}\n        , {header: 'accept', value: '*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'}]);\n      /* eslint-enable */\n      return obj;\n    }\n    , all: ()=>headers\n    , clear: function(){\n      headers = [];\n    }\n    , remove: function(header){\n      headers = _.reject(headers, (h)=>{\n        return h.header === header;\n      });\n    }\n    , set: function(xhr){\n      _.forEach(headers, function(h){\n        xhr.setRequestHeader(h.header, h.value);\n      });\n    }\n  };\n\n  return obj;\n};\n"]}