{"version":3,"sources":["../src/manage_headers.js"],"names":["clone","isArray","reject","addHeaders","headers","token","concat","push","obj","add","addDelete","header","value","addCSRF","addRails","all","clear","remove","h","set","xhr","forEach","setRequestHeader"],"mappings":"AAAA,SAAQA,KAAR,EAAeC,OAAf,EAAwBC,MAAxB,QAAqC,QAArC;AACA;;AAEA,SAASC,UAAT,CAAoBC,OAApB,EAA6BC,KAA7B,EAAmC;AACjCD,YAAUJ,MAAMI,OAAN,CAAV;AACA,MAAIH,QAAQI,KAAR,CAAJ,EAAmB;AACjBD,cAAUA,QAAQE,MAAR,CAAeD,KAAf,CAAV;AACD,GAFD,MAEO;AACLD,YAAQG,IAAR,CAAaF,KAAb;AACD;AACD,SAAOD,OAAP;AACD;;AAED,eAAe,YAAU;AACvB,MAAIA,UAAU,EAAd;;AAEA,MAAMI,MAAM;AACVC,SAAK,aAASJ,KAAT,EAAe;AAClBD,gBAAUD,WAAWC,OAAX,EAAoBC,KAApB,CAAV;AACA,aAAOG,GAAP;AACD,KAJS;AAKRE,eAAW,qBAAU;AACrBN,gBAAUD,WAAWC,OAAX,EACN,EAACO,QAAQ,wBAAT,EAAmCC,OAAO,QAA1C,EADM,CAAV;AAGA,aAAOJ,GAAP;AACD,KAVS;AAWRK,aAAS,iBAASR,KAAT,EAAe;AACxBD,gBAAUD,WAAWC,OAAX,EAAoB,EAACO,QAAQ,cAAT,EAAyBC,OAAOP,KAAhC,EAApB,CAAV;;AAEA,aAAOG,GAAP;AACD,KAfS;AAgBRM,cAAU,oBAAU;AACpB;AACAV,gBAAUD,WAAWC,OAAX,EAAoB,CAC5B,EAACO,QAAQ,cAAT,EAAyBC,OAAO,kBAAhC,EAD4B,EAE1B,EAACD,QAAQ,QAAT,EAAmBC,OAAO,sGAA1B,EAF0B,CAApB,CAAV;AAGA;AACA,aAAOJ,GAAP;AACD,KAvBS;AAwBRO,SAAK;AAAA,aAAIX,OAAJ;AAAA,KAxBG;AAyBRY,WAAO,iBAAU;AACjBZ,gBAAU,EAAV;AACD,KA3BS;AA4BRa,YAAQ,gBAASN,MAAT,EAAgB;AACxBP,gBAAUF,OAAOE,OAAP,EAAgB,UAACc,CAAD,EAAK;AAC7B,eAAOA,EAAEP,MAAF,KAAaA,MAApB;AACD,OAFS,CAAV;AAGD,KAhCS;AAiCRQ,SAAK,aAASC,GAAT,EAAa;AAClBhB,cAAQiB,OAAR,CAAgB,UAASH,CAAT,EAAW;AACzBE,YAAIE,gBAAJ,CAAqBJ,EAAEP,MAAvB,EAA+BO,EAAEN,KAAjC;AACD,OAFD;AAGD;AArCS,GAAZ;;AAwCA,SAAOJ,GAAP;AACD","file":"manage_headers.js","sourcesContent":["import {clone, isArray, reject} from 'lodash';\n// _.reject = require('lodash/reject');\n\nfunction addHeaders(headers, token){\n  headers = clone(headers);\n  if (isArray(token)){\n    headers = headers.concat(token);\n  } else {\n    headers.push(token);\n  }\n  return headers;\n}\n\nexport default function(){\n  let headers = [];\n\n  const obj = {\n    add: function(token){\n      headers = addHeaders(headers, token);\n      return obj;\n    }\n    , addDelete: function(){\n      headers = addHeaders(headers\n        , {header: 'X-Http-Method-Override', value: 'delete'}\n      );\n      return obj;\n    }\n    , addCSRF: function(token){\n      headers = addHeaders(headers, {header: 'X-CSRF-Token', value: token});\n\n      return obj;\n    }\n    , addRails: function(){\n      /* eslint-disable max-len */\n      headers = addHeaders(headers, [\n        {header: 'Content-type', value: 'application/json'}\n        , {header: 'accept', value: '*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'}]);\n      /* eslint-enable */\n      return obj;\n    }\n    , all: ()=>headers\n    , clear: function(){\n      headers = [];\n    }\n    , remove: function(header){\n      headers = reject(headers, (h)=>{\n        return h.header === header;\n      });\n    }\n    , set: function(xhr){\n      headers.forEach(function(h){\n        xhr.setRequestHeader(h.header, h.value);\n      });\n    }\n  };\n\n  return obj;\n};\n"]}